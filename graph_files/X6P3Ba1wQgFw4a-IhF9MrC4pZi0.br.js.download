var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__spreadArrays=this&&this.__spreadArrays||function(){for(var i=0,n=0,r=arguments.length;n<r;n++)i+=arguments[n].length;for(var u=Array(i),f=0,n=0;n<r;n++)for(var e=arguments[n],t=0,o=e.length;t<o;t++,f++)u[f]=e[t];return u},Covid;(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r="VaccineModule",u=function(){function i(i){var u=this;(this.initialize=function(){var t=function(){},i=function(t){var f,e,i;((f=t===null||t===void 0?void 0:t.request)===null||f===void 0?void 0:f.responseText)&&(e=JSON.parse(t.request.responseText),e)&&(i=u.transformAjaxData(e),i!==null&&i.stateLookup!==null&&i.stateDataPoints!==null)&&(u.stateLookup=i.stateLookup,u.stateDataPoints=i.stateDataPoints,n.Root.Logger.logModuleEvent("Success",r,"LoadMapDetails",{}),u.setupEventListeners())},f=function(){n.Root.Logger.logModuleEvent("Error",r,"LoadMapDetails",{})},e=function(){};n.Root.Logger.logModuleEvent("Request",r,"LoadMapDetails",{});n.Root.Root.makeAjaxRequest("/covid-vaccine/getMapData",t,i,f,e)},this.setupEventListeners=function(){for(var e,o=__spreadArrays(u.featureElems,u.smallStateLabelElems),n=u.moduleRootElem.querySelector("."+t.Map.Map.filterClass),r=0;r<o.length;r++){var i=o[r],f=i.getAttribute("data-id"),s=u.stateLookup[f],h=u.stateDataPoints[f];s!==null&&s!==""&&h!==null&&(Lib.CssClass.add(i,"cov_avail"),n!==null&&(e=n.querySelector('option[value="'+f+'"]'),e!==null&&e.removeAttribute("disabled")),u.isMobile?sj_be(i,"click",u.handleStateClick,!1):(sj_be(i,"mouseenter",u.handleStateMouseEnter,!1),sj_be(i,"mouseleave",u.handleStateMouseLeave,!1)))}n!==null&&(n.removeAttribute("disabled"),sj_be(n,"change",u.handleFilterChange,!1))},this.handleStateClick=function(i){var s,h,e;if(i){u.removePopover();var c=i.target,f=c.getAttribute("data-id"),o=u.getFeatureElem(f);o!==null&&(n.Root.Logger.logModuleEvent("Click",r,"StateClick",{stateCode:f}),s=u.stateLookup[f],h=u.stateDataPoints[f],u.renderPopover(o,s,h),e=u.moduleRootElem.querySelector("."+t.Map.Map.filterClass),e!==null&&(e.value=f))}},this.handleStateMouseEnter=function(t){if(t){var e=t.target,i=e.getAttribute("data-id"),f=u.getFeatureElem(i);f!==null&&(f.setAttribute("data-active","true"),n.Root.Logger.logModuleEvent("Hover",r,"StateHover",{stateCode:i}),setTimeout(function(){if(f.getAttribute("data-active")==="true"){var n=u.stateLookup[i],t=u.stateDataPoints[i];u.renderPopover(f,n,t)}},100))}},this.handleStateMouseLeave=function(n){if(n){var i=n.target,r=i.getAttribute("data-id"),t=u.getFeatureElem(r);t!==null&&(t.removeAttribute("data-active"),u.removePopover())}},this.handleFilterChange=function(t){var e,o;if(t){u.removePopover();var s=t.target,i=s.value,f=u.getFeatureElem(i);f!==null&&(n.Root.Logger.logModuleEvent("Click",r,"FilterSelection",{stateCode:i}),e=u.stateLookup[i],o=u.stateDataPoints[i],u.renderPopover(f,e,o))}},this.getFeatureElem=function(n){var t=u.featureElems.filter(function(t){return t.getAttribute("data-id")===n});return t===null||t.length!==1?null:t[0]},this.renderPopover=function(t,i,f){var e,a;if(t!==null&&i&&f!==null&&(e=u.createPopover(i,f),e!==null)){e.style.visibility="hidden";u.mapGraphicElem.appendChild(e);var c=e.getBoundingClientRect(),s=u.mapGraphicElem.getBoundingClientRect(),l=t.getBoundingClientRect(),v=u.mapGroupElem.getBoundingClientRect(),y=u.isMobile?0:v.left-s.left,p=u.isMobile?0+s.width-c.width:v.left-s.left+v.width-c.width,w=20,o=e.querySelector("svg"),h=l.left-s.left+l.width/2-c.width/2,b=l.top-s.top+l.height+10;h>p?(e.style.left=p+"px",o&&(a=h-p,o.style.left="calc(50% - "+w/2+"px + "+a+"px)")):h<y?(e.style.left=y+"px",o&&(a=y-h,o.style.left="calc(50% - "+w/2+"px - "+a+"px)")):(e.style.left=h+"px",o&&(o.style.left="calc(50% - "+w/2+"px)"));e.style.width=c.width+"px";e.style.top=b+"px";e.style.visibility="visible";n.Root.Logger.logModuleEvent("Show",r,"ShowPopover",{stateName:i})}},this.removePopover=function(){t.Map.Map.closePopover(u.moduleRootSelector,!1)},this.createPopover=function(n,i){if(!n||i===null)return null;var r=sj_ce("div",null,t.Map.Map.popoverClass),f='\n<svg class="cov_popover_close" enable-background="new 0 0 16 16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" onclick="Covid.Modules.VaccineModule.Map.Map.closePopover(\''+u.moduleRootSelector+'\')">\n    <path d="m15.707.293c-.391-.391-1.024-.391-1.415 0l-6.298 6.298-6.298-6.298c-.398-.384-1.031-.373-1.415.025-.375.388-.375 1.003 0 1.391l6.298 6.298-6.298 6.298c-.384.398-.373 1.031.025 1.415.388.375 1.003.375 1.391 0l6.298-6.298 6.298 6.298c.398.384 1.031.373 1.415-.025.375-.388.375-1.003 0-1.39l-6.299-6.299 6.298-6.298c.391-.391.391-1.024 0-1.415z" fill="#666" />\n    <path d="m0 0h16v16h-16z" fill="none" />\n<\/svg>',e='\n<svg class="cov_popover_glyph" viewBox="0 0 20 10">\n    <polyline class="cov_popover_poly" points="0,10 10,0 20,10" />\n<\/svg>\n<div class="cov_popover_cont">\n    '+(u.isMobile?f:"")+'\n    <div class="cov_popover_loc">'+u.sanitizeText(n)+'<\/div>\n    <div class="cov_popover_data">\n        <div class="cov_popover_lblGrp">\n            <div class="cov_popover_lbl">'+u.locStrings.dose1+'<\/div>\n            <div class="cov_popover_lbl">'+u.locStrings.dose2+'<\/div>\n            <div class="cov_popover_lbl">'+u.locStrings.population+'<\/div>\n            <div class="cov_popover_lbl">'+u.locStrings.per100+'<\/div>\n        <\/div>\n        <div class="cov_popover_valGrp">\n            <div class="cov_popover_val">'+u.sanitizeText(i.administeredDose1CountText)+" ("+u.sanitizeText(i.administeredDose1PercentText)+')<\/div>\n            <div class="cov_popover_val">'+u.sanitizeText(i.administeredDose2CountText)+" ("+u.sanitizeText(i.administeredDose2PercentText)+')<\/div>\n            <div class="cov_popover_val">'+u.sanitizeText(i.population)+'<\/div>\n            <div class="cov_popover_val">'+u.sanitizeText(i.dosesPer100Text)+"<\/div>\n        <\/div>\n    <\/div>\n<\/div>";return r.innerHTML=e,r},this.sanitizeText=function(n){var t=sj_ce("div");return t.textContent=n,t.innerHTML},this.transformAjaxData=function(n){return n?{stateLookup:n.StateLookup,stateDataPoints:Object.keys(n.StateDataPoints).reduce(function(t,i){var r,f=n.StateDataPoints[i];return __assign(__assign({},t),(r={},r[i]=u.transformDataPoints(f),r))},{})}:null},this.transformDataPoints=function(n){return n?{administeredDose1CountText:n.ad1ct,administeredDose1PercentText:n.ad1pt,administeredDose2CountText:n.ad2ct,administeredDose2PercentText:n.ad2pt,population:n.p,dosesPer100Text:n.dp100t}:null},this.moduleRootSelector=i.moduleRootSelector,this.moduleRootElem=_d.querySelector(this.moduleRootSelector),this.moduleRootElem!==null)&&(this.isMobile=i.isMobile,this.locStrings=i.locStrings,this.locStrings!==null)&&(this.mapGraphicElem=this.moduleRootElem.querySelector(".cov_map"),this.mapGraphicElem!==null)&&(this.mapGroupElem=this.mapGraphicElem.querySelector(".cov_map_group"),this.mapGroupElem!==null)&&(this.featureElems=Array.prototype.slice.call(this.mapGraphicElem.querySelectorAll(".cov_feature")),this.featureElems!==null&&this.featureElems.length!==0)&&(this.smallStateLabelElems=Array.prototype.slice.call(this.mapGraphicElem.querySelectorAll(".cov_smStateLabel")),this.smallStateLabelElems!==null&&this.smallStateLabelElems.length!==0)&&this.initialize()}return i.popoverClass="cov_popover",i.filterClass="cov_map_filter",i.closePopover=function(n,i){var r,u,f,e,o;if((i===void 0&&(i=!0),r=_d.querySelector(n),r!==null)&&(u=r.querySelector(".cov_map"),u!==null)){if(f=u.querySelectorAll("."+t.Map.Map.popoverClass),f!==null)for(e=0;e<f.length;e++)u.removeChild(f[e]);i&&(o=r.querySelector("."+t.Map.Map.filterClass),o!==null&&(o.value=""))}},i}();i.Map=u;sj_evt.fire("OnScriptLoad:Covid.Modules.VaccineModule.Map")})(i=t.Map||(t.Map={}))})(i=t.VaccineModule||(t.VaccineModule={}))})(t=n.Modules||(n.Modules={}))})(Covid||(Covid={})),function(n){var t;(function(t){var i;(function(t){var i;(function(t){var r,i,f,u;(function(n){n[n.Location=0]="Location";n[n.Dose1=1]="Dose1";n[n.Dose2=2]="Dose2";n[n.DosesPer100=3]="DosesPer100"})(r||(r={})),function(n){n[n.Ascending=0]="Ascending";n[n.Descending=1]="Descending"}(i||(i={}));f="VaccineModule";u=function(){function t(t){var u=this;(this.sortAscendingClass="cov_sortAsc",this.sortDescendingClass="cov_sortDes",this.currentSortColumn=r.Location,this.currentSortDirection=i.Ascending,this.getAllRowData=function(){var n=Array.prototype.slice.call(u.tableBodyElem.querySelectorAll(".cov_row"));return n===null?null:n.map(function(n){var u=n.getAttribute("data-sort-loc"),t=n.getAttribute("data-sort-dose1"),i=n.getAttribute("data-sort-dose2"),r=n.getAttribute("data-sort-dosesPer"),f=n.getAttribute("data-sort-bold");return{rowElem:n,location:u,dose1Percent:t===""?0:parseFloat(t),dose2Percent:i===""?0:parseFloat(i),dosesPer100:r===""?0:parseFloat(r),isBold:f==="true"}})},this.getHidenRowCount=function(){if(u.isExpansionControl==!1)return 0;var n=u.inlineContainerElem.querySelectorAll(".cov_row");return n===null?0:n.length},this.initialize=function(){u.locationHeaderElem!==null&&sj_be(u.locationHeaderElem,"click",u.handleLocationClick,!1);u.dose1HeaderElem!==null&&sj_be(u.dose1HeaderElem,"click",u.handleDose1Click,!1);u.dose2HeaderElem!==null&&sj_be(u.dose2HeaderElem,"click",u.handleDose2Click,!1);u.dosesPer100HeaderElem!==null&&sj_be(u.dosesPer100HeaderElem,"click",u.handleDosesPer100Click,!1);u.tableRootElem.setAttribute("data-ready","true")},this.handleLocationClick=function(){u.sortRows(r.Location)},this.handleDose1Click=function(){u.sortRows(r.Dose1)},this.handleDose2Click=function(){u.sortRows(r.Dose2)},this.handleDosesPer100Click=function(){u.sortRows(r.DosesPer100)},this.sortRows=function(n){var t=n===u.currentSortColumn?u.currentSortDirection===i.Ascending?i.Descending:i.Ascending:u.currentSortDirection;switch(n){case r.Location:u.sortByLocation(t);u.sortByBold();break;case r.Dose1:u.sortByDose1Percent(t);u.sortByBold();break;case r.Dose2:u.sortByDose2Percent(t);u.sortByBold();break;case r.DosesPer100:u.sortByDosesPer100(t);u.sortByBold();break;default:return}u.removeSortingClasses();u.addSortingClass(n,t);u.removeExistingRows();u.addSortedRows();u.currentSortColumn=n;u.currentSortDirection=t},this.removeSortingClasses=function(){u.locationHeaderElem!==null&&(Lib.CssClass.remove(u.locationHeaderElem,u.sortAscendingClass),Lib.CssClass.remove(u.locationHeaderElem,u.sortDescendingClass));u.dose1HeaderElem!==null&&(Lib.CssClass.remove(u.dose1HeaderElem,u.sortAscendingClass),Lib.CssClass.remove(u.dose1HeaderElem,u.sortDescendingClass));u.dose2HeaderElem!==null&&(Lib.CssClass.remove(u.dose2HeaderElem,u.sortAscendingClass),Lib.CssClass.remove(u.dose2HeaderElem,u.sortDescendingClass));u.dosesPer100HeaderElem!==null&&(Lib.CssClass.remove(u.dosesPer100HeaderElem,u.sortAscendingClass),Lib.CssClass.remove(u.dosesPer100HeaderElem,u.sortDescendingClass))},this.addSortingClass=function(n,t){if(n===r.Location){Lib.CssClass.add(u.locationHeaderElem,t===i.Ascending?u.sortAscendingClass:u.sortDescendingClass);return}if(n===r.Dose1){Lib.CssClass.add(u.dose1HeaderElem,t===i.Ascending?u.sortAscendingClass:u.sortDescendingClass);return}if(n===r.Dose2){Lib.CssClass.add(u.dose2HeaderElem,t===i.Ascending?u.sortAscendingClass:u.sortDescendingClass);return}if(n===r.DosesPer100){Lib.CssClass.add(u.dosesPer100HeaderElem,t===i.Ascending?u.sortAscendingClass:u.sortDescendingClass);return}},this.removeExistingRows=function(){u.isExpansionControl?(n.Root.Root.removeChildrenOfClass(u.expansionControlElem,"cov_row"),n.Root.Root.removeAllChildren(u.inlineContainerElem)):n.Root.Root.removeAllChildren(u.tableBodyElem)},this.addSortedRows=function(){var n;if(u.isExpansionControl){for(n=u.visibleRowCount-1;n>=0;n--)u.expansionControlElem.prepend(u.allRowData[n].rowElem);for(n=u.visibleRowCount;n<u.allRowData.length;n++)u.inlineContainerElem.appendChild(u.allRowData[n].rowElem)}else for(n=0;n<u.allRowData.length;n++)u.tableBodyElem.appendChild(u.allRowData[n].rowElem)},this.sortByLocation=function(n){u.allRowData.sort(function(t,r){return t.location<r.location?n===i.Ascending?-1:1:t.location>r.location?n===i.Ascending?1:-1:0})},this.sortByDose1Percent=function(n){u.allRowData.sort(function(t,r){return t.dose1Percent<r.dose1Percent?n===i.Ascending?-1:1:t.dose1Percent>r.dose1Percent?n===i.Ascending?1:-1:0})},this.sortByDose2Percent=function(n){u.allRowData.sort(function(t,r){return t.dose2Percent<r.dose2Percent?n===i.Ascending?-1:1:t.dose2Percent>r.dose2Percent?n===i.Ascending?1:-1:0})},this.sortByDosesPer100=function(n){u.allRowData.sort(function(t,r){return t.dosesPer100<r.dosesPer100?n===i.Ascending?-1:1:t.dosesPer100>r.dosesPer100?n===i.Ascending?1:-1:0})},this.sortByBold=function(){u.allRowData.sort(function(n,t){return n.isBold===!0?-1:t.isBold===!0?1:0})},this.moduleRootSelector=t.moduleRootSelector,this.moduleRootElem=_d.querySelector(this.moduleRootSelector),this.moduleRootElem!==null)&&(this.tableRootElem=this.moduleRootElem.querySelector(".cov_vacTable"),this.tableRootElem!==null)&&(this.tableHeadElem=this.moduleRootElem.querySelector(".cov_tableHead"),this.tableHeadElem!==null)&&(this.tableBodyElem=this.moduleRootElem.querySelector(".cov_tableBody"),this.tableBodyElem!==null)&&(this.allRowData=this.getAllRowData(),this.allRowData!==null)&&(this.expansionControlElem=this.tableBodyElem.querySelector(".b_module_expansion_control"),this.inlineContainerElem=this.expansionControlElem===null?null:this.expansionControlElem.querySelector(".b_expandable_inline_container"),this.isExpansionControl=this.expansionControlElem!==null&&this.inlineContainerElem!==null,this.hiddenRowCount=this.getHidenRowCount(),this.visibleRowCount=this.allRowData.length-this.hiddenRowCount,this.locationHeaderElem=this.tableHeadElem.querySelector(".cov_locHead"),this.dose1HeaderElem=this.tableHeadElem.querySelector(".cov_dose1Head"),this.dose2HeaderElem=this.tableHeadElem.querySelector(".cov_dose2Head"),this.dosesPer100HeaderElem=this.tableHeadElem.querySelector(".cov_dosesPerHead"),this.initialize())}return t}();t.Table=u;sj_evt.fire("OnScriptLoad:Covid.Modules.VaccineModule.Table")})(i=t.Table||(t.Table={}))})(i=t.VaccineModule||(t.VaccineModule={}))})(t=n.Modules||(n.Modules={}))}(Covid||(Covid={}))